<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../assets/css/usuario/login.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300&display=swap" rel="stylesheet">
    <script id="ze-snippet" src="https://static.zdassets.com/ekr/snippet.js?key=80307728-deba-46b0-896c-3db8e9d0c692">
    </script>
    <title>Login</title>
</head>

<body>

    <div class="header" id="header-login">
        <div class="container">
            <!-- logo -->
            <img id="logo" src="../assets/images/logo-analyx.svg" alt="">

            <div class="navbar">
                <li><a href="../index.html">Início</a></li>
            </div>
        </div>
    </div>


    <div class="form">
        <div class="login-user">
            <span id="login-title">Login</span>

            <div class="input" id="ipt1">
                Email:
                <input type="email" name="email" id="email_input" placeholder="Digite seu E-MAIL">
            </div>

            <div class="input" id="ipt2">
                Senha:
                <input type="password" name="senha" id="senha_input" placeholder="Digite sua senha">
            </div>

            <button id="btn_entrar" onclick="conectar()">Conectar</button>
        </div>
    </div>

</body>

<script src="js/index.js"></script>

</html>

<script>


    function conectar() {

        if ((email_input.value).length > 3 && (senha_input.value).length > 3) {
            setTimeout(() => {
                window.location = "../dashboard/dashboardInit.html";
            }, "2000")
        }else{
            alert('O email e senha precisam ter o minimo de 4 digitos.');
        }


        // aguardar();

        // var emailVar = email_input.value;
        // var senhaVar = senha_input.value;

        // if (emailVar == "" || senhaVar == "") {

        //     // finalizarAguardar();
        //     return false;
        // }
        // else {
        //     //  setInterval(sumirMensagem, 5000)
        // }

        // console.log("FORM LOGIN: ", emailVar);
        // console.log("FORM SENHA: ", senhaVar);

        // fetch("/usuarios/autenticar", {
        //     method: "POST",
        //     headers: {
        //         "Content-Type": "application/json"
        //     },
        //     body: JSON.stringify({
        //         emailServer: emailVar,
        //         senhaServer: senhaVar
        //     })
        // }).then(function (resposta) {
        //     console.log("ESTOU NO THEN DO entrar()!")

        //     if (resposta.ok) {
        //         console.log(resposta);

        //         resposta.json().then(json => {
        //             console.log(json);
        //             console.log(JSON.stringify(json));

        //             sessionStorage.EMAIL_USUARIO = json.email;
        //             sessionStorage.NOME_USUARIO = json.nomeUsuario;
        //             sessionStorage.ID_USUARIO = json.idUsuario;
        //             sessionStorage.ID_EMPRESA = json.fkEmpresa;
        //             sessionStorage.TIPO_USUARIO = json.tipo;

        //             if (sessionStorage.TIPO_USUARIO == 2) {
        //                 alert("Este usuario é java")
        //                 sessionStorage.clear();
        //             } else {

        //                 setTimeout(function () {
        //                     window.location = "../dashboard/dashboardInit.html";
        //                 }, 1000); // apenas para exibir o loading
        //             }

        //         });

        //     } else {

        //         console.log("Houve um erro ao tentar realizar o login!");
        //         alert("Email ou senha inválidos!")

        //         resposta.text().then(texto => {
        //             console.error(texto);
        //         });
        //     }

        // }).catch(function (erro) {
        //     console.log(erro);
        // })

        // return false;
    }

</script>